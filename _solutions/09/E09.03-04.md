---
title:       Exercise 9.3-4
published:   2025-11-16 10:00
modified:    2025-11-16 10:00
keywords:    "order statistics, comparisons, adversary argument, selection algorithm"
description: "Suppose that an algorithm uses only comparisons to find the ith smallest element in a set of n elements. Show that it can also find the i − 1 smaller elements and the n − i larger elements without performing any additional comparisons."
---

> Suppose that an algorithm uses only comparisons to find the $$i$$th smallest element in a set of $$n$$ elements. Show that it can also find the $$i - 1$$ smaller elements and the $$n - i$$ larger elements without performing any additional comparisons.

Consider any comparison-based algorithm that correctly identifies the $$i$$th smallest element $$x$$. We will show that the comparison history alone is sufficient to identify which elements are smaller than $$x$$ and which are larger.

Build a directed comparison graph where each node represents an element, and we add an edge from $$a$$ to $$b$$ if the algorithm compared $$a$$ and $$b$$ and found $$a < b$$. This graph encodes all information learned from the comparisons.

For the algorithm to correctly identify $$x$$ as the $$i$$th smallest, it must establish (through direct or transitive comparisons) that:

1. At least $$i - 1$$ elements are smaller than $$x$$
2. At least $$n - i$$ elements are larger than $$x$$

If there were some element $$y$$ whose relationship to $$x$$ could not be determined from the comparison graph, then in the final state, we could swap $$x$$ and $$y$$ without contradicting any comparison. This would mean the algorithm couldn't distinguish which of $$x$$ or $$y$$ is the $$i$$th smallest, contradicting the algorithm's correctness.

Therefore, from the comparison graph, we can determine for each element whether it is smaller or larger than $$x$$ by checking reachability:

- An element $$y$$ is smaller than $$x$$ if there is a directed path from $$y$$ to $$x$$
- An element $$y$$ is larger than $$x$$ if there is a directed path from $$x$$ to $$y$$

Computing these reachable sets via graph traversal (such as depth-first search) requires no additional comparisons, just processing of the information already gathered. Since $$x$$ is the $$i$$th smallest, exactly $$i - 1$$ elements will be reachable from $$x$$ backward (the smaller elements) and exactly $$n - i$$ elements will be reachable from $$x$$ forward (the larger elements).

Thus, any algorithm that finds the $$i$$th smallest element through comparisons has implicitly identified all smaller and larger elements, even if it didn't explicitly track them during execution.