---
title:       Exercise 14.1-2
published:   2025-11-16 00:00
modified:    2025-11-16 00:00
keywords:    "order-statistic tree, rank computation, tree traversal, augmented data structure"
description: "Show how OS-RANK(T, x) operates on the red-black tree T of Figure 14.1 and the node x with x.key = 35."
---

> Show how $$\textsc{OS-Rank}(T, x)$$ operates on the red-black tree $$T$$ of Figure 14.1 and the node $$x$$ with $$x.key = 35$$.

We trace the execution of $$\textsc{OS-Rank}(T, x)$$ where $$x$$ is the node with key 35. The algorithm computes the rank by starting at $$x$$ and walking up to the root, accumulating the rank along the way.

The key insight is that as we move up the tree, we need to count all nodes that come before $$x$$ in an inorder traversal. When we're a right child, we add the size of our parent's left subtree plus 1 (for the parent itself).

**Initialization:**

$$r = x.left.size + 1 = 1 + 1 = 2$$

This is the rank of node 35 within its own subtree. We set $$y = x$$ (node with key 35).

**Iteration 1:** $$y$$ has key 35, $$r = 2$$

Node 35 is a right child of node 30. Since we're coming from the right, we don't add anything to $$r$$. We move up: $$y = y.p$$ (node with key 30).

**Iteration 2:** $$y$$ has key 30, $$r = 2$$

Node 30 is a left child of node 41. Since we're coming from the left, we don't add anything to $$r$$. We move up: $$y = y.p$$ (node with key 41).

**Iteration 3:** $$y$$ has key 41, $$r = 2$$

Node 41 is a right child of node 26 (the root). Since we're a right child, all nodes in our parent's left subtree come before $$x$$ in the inorder traversal, as does our parent itself. We add:

$$r = r + y.p.left.size + 1 = 2 + 12 + 1 = 15$$

We move up: $$y = y.p$$ (node with key 26, the root).

**Iteration 4:** $$y$$ has key 26, $$r = 15$$

Now $$y = T.root$$, so the loop terminates. The procedure returns $$r = 15$$.

Therefore, the node with key 35 has rank 15 in the tree, meaning it is the 15th smallest element.
