---
title:       Exercise 10.3-2
published:   2025-11-16 12:00
modified:    2025-11-16 12:00
keywords:    "single-array representation, allocate object, free object, memory management"
description: "Write the procedures ALLOCATE-OBJECT and FREE-OBJECT for a homogeneous collection of objects implemented by the single-array representation."
---

> Write the procedures $$\textsc{Allocate-Object}$$ and $$\textsc{Free-Object}$$ for a homogeneous collection of objects implemented by the single-array representation.

In the single-array representation, each object occupies $$k$$ consecutive positions in the array (where $$k$$ is the number of attributes per object). A pointer to an object is the index of its first position. We maintain a free list using one of the attributes (typically the first one that would serve as a "next" pointer in the free list).

Let's assume each object has $$k$$ attributes, and we use the first attribute position as the $$\textit{next}$$ pointer in the free list. The global variable $$\textit{free}$$ points to the first free object.

{% capture code %}
ALLOCATE-OBJECT()
    if free == NIL
        error "out of space"
    else
        x = free
        free = A[free]  // First attribute holds next free object
        return x

FREE-OBJECT(x)
    A[x] = free     // First attribute points to current free list
    free = x
{% endcapture %}
{% include clrs_code.html %}

### How It Works

**$$\textsc{Allocate-Object}$$:** We return the index of the first free object ($$\textit{free}$$) and update $$\textit{free}$$ to point to the next free object. The next free object's index is stored in $$A[\textit{free}]$$, which is the first attribute position of the current free object.

**$$\textsc{Free-Object}$$:** We add the freed object to the front of the free list. We store the current $$\textit{free}$$ pointer in the first attribute position of object $$x$$ (at $$A[x]$$), then update $$\textit{free}$$ to point to $$x$$.

Both operations run in $$O(1)$$ time.

{% capture note %}
The key difference from the multiple-array representation is that in the single-array version, we need to be more careful about indexing. If each object has $$k$$ attributes and we allocate object starting at index $$x$$, then:
- Attribute 0 is at $$A[x]$$
- Attribute 1 is at $$A[x + 1]$$
- Attribute $$k-1$$ is at $$A[x + k - 1]$$

The free list is maintained by treating the first attribute of each free object as a "next" pointer. This works because free objects don't need to store meaningful data in their attribute positions.
{% endcapture %}
{% include aside.html title='Index Arithmetic' %}
