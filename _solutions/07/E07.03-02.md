---
title:       Exercise 7.3-2
published:   2025-11-16 10:00
modified:    2025-11-16 10:00
keywords:    "randomized quicksort, random number generator, calls, analysis"
description: "When RANDOMIZED-QUICKSORT runs, how many calls are made to the random-number generator RANDOM in the worst case? How about in the best case? Give your answer in terms of Î˜-notation."
---

> When $$\textsc{Randomized-Quicksort}$$ runs, how many calls are made to the random-number generator $$\textsc{Random}$$ in the worst case? How about in the best case? Give your answer in terms of $$\Theta$$-notation.

The number of calls to $$\textsc{Random}$$ equals the number of times $$\textsc{Randomized-Partition}$$ is called, since each invocation of $$\textsc{Randomized-Partition}$$ makes exactly one call to $$\textsc{Random}$$ to select a pivot.

The key observation is that $$\textsc{Randomized-Partition}$$ is called once for each subarray that is processed during the sorting, and the total number of such calls depends on the structure of the recursion tree, not on how balanced the partitions are.

**Counting partition calls:**

Each element becomes a pivot exactly once during the entire execution of quicksort. Once an element is selected as a pivot, it's placed in its final position and never included in future recursive calls. With $$n$$ elements, there are exactly $$n$$ partition operations over the entire execution.

Wait, that's not quite right. Let me reconsider.

Actually, $$\textsc{Partition}$$ is called once for each *subarray* that needs sorting. The number of partition calls depends on the recursion tree structure:

- **Worst case:** When partitions are maximally unbalanced (one side has $$n-1$$ elements, the other has 0), the recursion creates a linear chain. We partition subarrays of sizes $$n$$, $$n-1$$, $$n-2$$, ..., down to 2. This gives us:

$$\sum_{i=2}^{n} 1 = n - 1 = \Theta(n)$$

- **Best case:** When partitions are perfectly balanced, we have a complete binary recursion tree of depth $$\lg n$$. The number of internal nodes (each representing a partition call) in a complete binary tree with $$n$$ leaves is approximately $$n - 1$$:

$$\Theta(n)$$

**Both cases give $$\Theta(n)$$ calls:**

In fact, for *any* execution of quicksort on $$n$$ elements, the number of partition calls is $$\Theta(n)$$. Here's why: each partition call processes a non-empty subarray and places one pivot element in its final position. Since we need to place $$n$$ elements and we handle roughly one element per partition (sometimes more in unbalanced cases, sometimes exactly one), we make $$\Theta(n)$$ partition calls total.

More precisely, the number of partition calls is at most $$n - 1$$ (when we partition down to subarrays of size 1) and at least $$n - 1$$ (when we have a binary tree structure), so it's exactly $$\Theta(n)$$ in both cases.

Therefore, $$\textsc{Random}$$ is called $$\Theta(n)$$ times in both the best case and the worst case.

{% capture note %}
This is a nice property: the randomization overhead (random number generation) is linear regardless of how lucky or unlucky we are with pivot choices. The difference between best and worst cases shows up in the number of comparisons and array accesses, not in the number of random choices made.
{% endcapture %}
{% include aside.html title='Linear randomization cost' %}
