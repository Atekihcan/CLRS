---
title:       Exercise 12.2-4
published:   2025-11-16 10:00
modified:    2025-11-16 10:00
keywords:    "binary search tree, search path, counterexample"
description: "Professor Bunyan thinks he has discovered a remarkable property of binary search trees. Suppose that the search for key k in a binary search tree ends up in a leaf. Consider three sets: A, the keys to the left of the search path; B, the keys on the search path; and C, the keys to the right of the search path. Professor Bunyan claims that any three keys a ∈ A, b ∈ B, and c ∈ C must satisfy a ≤ b ≤ c. Give a smallest possible counterexample to the professor's claim."
---

> Professor Bunyan thinks he has discovered a remarkable property of binary search trees. Suppose that the search for key $$k$$ in a binary search tree ends up in a leaf. Consider three sets: $$A$$, the keys to the left of the search path; $$B$$, the keys on the search path; and $$C$$, the keys to the right of the search path. Professor Bunyan claims that any three keys $$a \in A$$, $$b \in B$$, and $$c \in C$$ must satisfy $$a \le b \le c$$. Give a smallest possible counterexample to the professor's claim.

Professor Bunyan's claim is false. Here is a minimal counterexample with just 3 nodes:

```
    10
   /
  5
   \
    7
```

Searching for key $$k = 7$$:

- **Search path**: Start at 10 ($$7 < 10$$, go left), then at 5 ($$7 > 5$$, go right), then at 7 (found)
- **Set** $$B$$ **(on the search path)**: $$\{10, 5, 7\}$$
- **Set** $$A$$ **(left of search path)**: Empty
- **Set** $$C$$ **(right of search path)**: Empty

Wait, this does not give us a counterexample since $$A$$ and $$C$$ are empty. Let me try a slightly larger tree:

```
      10
     /  \
    5   15
   / \
  3   7
```

Searching for key $$k = 7$$:

- **Search path**: $$10 \to 5 \to 7$$
- **Set** $$B$$ **(on path)**: $$\{10, 5, 7\}$$
- **Set** $$A$$ **(left of path)**: $$\{3\}$$ (left child of 5, which is on the path)
- **Set** $$C$$ **(right of path)**: $$\{15\}$$ (right child of 10, which is on the path)

Now let us check Professor Bunyan's claim with $$a = 3$$, $$b = 7$$, $$c = 15$$:
$$3 \le 7 \le 15$$ ✓ (This works!)

But what if we choose $$b = 5$$ instead?
$$a = 3 \le b = 5$$, but we also need $$b = 5 \le c = 15$$ ✓ (Still works!)

Let me try a different tree structure:

```
    10
   /  \
  8   15
 /
7
```

Searching for key $$k = 7$$:

- **Search path**: $$10 \to 8 \to 7$$
- **Set** $$B$$: $$\{10, 8, 7\}$$
- **Set** $$A$$: Empty
- **Set** $$C$$: $$\{15\}$$

Choose $$b = 7 \in B$$, $$c = 15 \in C$$: $$7 \le 15$$ ✓

Actually, let me reconsider what "left of search path" and "right of search path" mean. I need a tree where going left from a node on the path, we find elements that are larger than some element on the path later:

```
    15
   /
  10
 /  \
5   12
```

Searching for key $$k = 12$$:

- **Search path**: $$15 \to 10 \to 12$$
- **Set** $$B$$: $$\{15, 10, 12\}$$
- **Set** $$A$$: $$\{5\}$$ (left child of 10)
- **Set** $$C$$: Empty

Choose $$a = 5$$, $$b = 12$$, then $$a \le b$$? Yes, $$5 \le 12$$ ✓

Let me think more carefully. The claim is $$a \le b \le c$$ for ANY $$a \in A$$, $$b \in B$$, $$c \in C$$. So I need to find a case where this fails.

Actually, here is a simple counterexample:

```
     5
    / \
   3  10
  /
 1
```

{% include ads.html %}

Searching for key $$k = 10$$:

- **Search path**: $$5 \to 10$$
- **Set** $$B$$: $$\{5, 10\}$$
- **Set** $$A$$: $$\{3, 1\}$$ (subtree to the left of the path, under node 5)
- **Set** $$C$$: Empty (no nodes to the right of the path)

Choose $$a = 3 \in A$$, $$b = 5 \in B$$: We get $$3 \le 5$$ ✓

Hmm, let me reconsider. The smallest counterexample should have nodes where $$a > b$$ or $$b > c$$.

Here it is:

```
    10
   /  \
  5   15
   \
   12
```

Searching for $$k = 12$$:

- **Search path**: $$10 \to 5 \to 12$$
- **Set** $$B$$: $$\{10, 5, 12\}$$
- **Set** $$C$$: $$\{15\}$$

Choose $$b = 5 \in B$$, $$c = 15 \in C$$: We have $$5 \le 15$$ ✓
But choose $$b = 12 \in B$$, $$c = 15 \in C$$: We have $$12 \le 15$$ ✓

Wait, the issue is that NOT all $$b \le c$$. Let me find when $$b > c$$.

Actually, here is the counterexample:

```
     20
    /  \
  10   30
   \
   15
```

Searching for $$k = 15$$:

- **Search path**: $$20 \to 10 \to 15$$
- **Set** $$B$$: $$\{20, 10, 15\}$$
- **Set** $$A$$: Empty
- **Set** $$C$$: $$\{30\}$$

Choose $$b = 20 \in B$$, $$c = 30 \in C$$: $$20 \le 30$$ ✓
Choose $$b = 15 \in B$$, $$c = 30 \in C$$: $$15 \le 30$$ ✓

Hmm, what about when we have $$b > c$$?

```
      15
     /  \
   10   20
  /
 5
  \
   7
```

Searching for $$k = 7$$:

- **Search path**: $$15 \to 10 \to 5 \to 7$$
- **Set** $$B$$: $$\{15, 10, 5, 7\}$$
- **Set** $$C$$: $$\{20\}$$

Choose $$b = 5 \in B$$, $$c = 20 \in C$$: $$5 \le 20$$ ✓

Actually, I think the smallest counterexample is:

```
     10
    /  \
   5   15
  / \
 3   7
```

Searching for $$k = 3$$:

- **Search path**: $$10 \to 5 \to 3$$
- **Set** $$B$$: $$\{10, 5, 3\}$$
- **Set** $$A$$: Empty
- **Set** $$C$$: $$\{15, 7\}$$

Choose $$b = 3 \in B$$, $$c = 7 \in C$$: We have $$3 \le 7$$ ✓
But choose $$b = 10 \in B$$, $$c = 7 \in C$$: We have $$10 > 7$$ **Counterexample!** ✗

This is the smallest counterexample. The claim fails because node 10 is on the search path, and node 7 is to the right of the search path (it is the right child of node 5, which is on the path), but $$10 > 7$$.

**Answer:** The tree with nodes $$\{10, 5, 15, 3, 7\}$$ where we search for key 3. We have $$b = 10 \in B$$ and $$c = 7 \in C$$, but $$10 > 7$$, violating $$b \le c$$.
