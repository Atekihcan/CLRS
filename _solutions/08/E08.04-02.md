---
title:       Exercise 8.4-2
published:   2025-11-16 20:15
modified:    2025-11-16 20:15
keywords:    "bucket sort, worst case, complexity analysis, algorithm modification"
description: "Explain why the worst-case running time for bucket sort is Θ(n²). What simple change to the algorithm preserves its linear average-case running time and makes its worst-case running time O(n lg n)?"
---

> Explain why the worst-case running time for bucket sort is $$\Theta(n^2)$$. What simple change to the algorithm preserves its linear average-case running time and makes its worst-case running time $$O(n \lg n)$$?

### Why Worst Case is $$\Theta(n^2)$$

The worst case occurs when all $$n$$ elements end up in a single bucket.

When all elements go into one bucket, bucket sort essentially reduces to sorting that one bucket using insertion sort. Since insertion sort takes $$\Theta(n^2)$$ time on $$n$$ elements in the worst case, the overall worst-case time for bucket sort is $$\Theta(n^2)$$.

This can happen when:
- The input is not uniformly distributed (e.g., all elements in $$[0.5, 0.6)$$)
- An adversary deliberately chooses inputs to defeat the algorithm

For example, if $$A = \langle .51, .52, .53, .54, .55, .56, .57, .58, .59 \rangle$$, all elements fall into bucket 5, and we must sort all 9 elements using insertion sort.

### Improving the Worst Case

Replace insertion sort with merge sort (or heapsort) for sorting individual buckets.

With this change:
- Each bucket with $$k$$ elements takes $$O(k \lg k)$$ time to sort
- In the worst case where all $$n$$ elements are in one bucket, sorting takes $$O(n \lg n)$$ time
- The rest of the algorithm (distributing into buckets and concatenating) still takes $$\Theta(n)$$ time
- Total worst-case time: $$O(n \lg n)$$

### Why Average Case Remains Linear

The average-case analysis doesn't depend on which sorting algorithm we use for individual buckets. It depends on the expected distribution of elements across buckets.

When input is uniformly distributed, we expect $$O(1)$$ elements per bucket. Sorting $$O(1)$$ elements takes $$O(1)$$ time whether we use insertion sort or merge sort. With $$n$$ buckets, total expected time remains $$\Theta(n)$$.

{% capture note %}
In practice, insertion sort is often kept because it's faster than merge sort for small inputs (the common case), and a hybrid approach might switch to merge sort only when a bucket exceeds a certain threshold size.
{% endcapture %}
{% include aside.html title='Practical Implementations' %}
